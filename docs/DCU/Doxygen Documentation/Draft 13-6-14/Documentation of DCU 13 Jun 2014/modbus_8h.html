<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SiteSync Stage-1: inc/modbus.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SiteSync Stage-1
   &#160;<span id="projectnumber">VER 1.0</span>
   </div>
   <div id="projectbrief">SiteSync</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('modbus_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">modbus.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file contains structures which is used for communicating with Modbus slave devices. DCU support Modbus RTU and ASCII over TCP and serial.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="polling_8h_source.html">polling.h</a>&quot;</code><br/>
</div>
<p><a href="modbus_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores information required for polling the device connected over Modbus. This structure is used to store received data from device and for sending request over Modbus for particular device.  <a href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a05e33edad4a05b648013f88967138dda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#a05e33edad4a05b648013f88967138dda">LEN_OF_MB_PKT_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a05e33edad4a05b648013f88967138dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ac018c0dd9d67383f495d4ca3505d1eb4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4">MB_POINT_TYPE</a> { <br/>
&#160;&#160;<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4a93cb4a482f504fc91047a4aec00fe5c4">MB_POINT_TYPE_COIL_STATUS</a> = 1, 
<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4ad28ad56cd11d1d3928f84754f1998b65">MB_POINT_TYPE_INPUT_STATUS</a>, 
<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4a1df1e49dcfe4c9360351bcc6d7b55ab7">MB_POINT_TYPE_HOLDING_REG</a>, 
<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4a32890793513068dea08c5342e750137a">MB_POINT_TYPE_INPUT_REG</a>, 
<br/>
&#160;&#160;<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4a7399e50461c2e8cf0091b1761d35ab8c">MB_POINT_TYPE_WRITE_COIL</a> = 5, 
<a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4a83f8810b88c0b48819102e17362b75bc">MB_POINT_TYPE_WRITE_MULTIPLE_COIL</a> = 15
<br/>
 }</td></tr>
<tr class="memdesc:ac018c0dd9d67383f495d4ca3505d1eb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of register for Modbus. e.g holding register, input register etc.  <a href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4">More...</a><br/></td></tr>
<tr class="separator:ac018c0dd9d67383f495d4ca3505d1eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a96e86c4f8a8ac2e359b11519271924d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#a96e86c4f8a8ac2e359b11519271924d1">FillErrorCode</a> (<a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *PollInfo, unsigned char *Buffer, unsigned char ModbusType, unsigned char Media, int ErrorCode)</td></tr>
<tr class="memdesc:a96e86c4f8a8ac2e359b11519271924d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill error code in response packet to BMS as we got invalid request packet from BMS.  <a href="#a96e86c4f8a8ac2e359b11519271924d1">More...</a><br/></td></tr>
<tr class="separator:a96e86c4f8a8ac2e359b11519271924d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb91953291005356320a0d0bc9ca8747"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#afb91953291005356320a0d0bc9ca8747">FillBMSModbusResp</a> (<a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *PollInfo, unsigned char *Buffer, unsigned char ModbusType, unsigned char Media)</td></tr>
<tr class="memdesc:afb91953291005356320a0d0bc9ca8747"><td class="mdescLeft">&#160;</td><td class="mdescRight">API to fill response packet to send over modbus tcp or modbus serial to the BMS.  <a href="#afb91953291005356320a0d0bc9ca8747">More...</a><br/></td></tr>
<tr class="separator:afb91953291005356320a0d0bc9ca8747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95d98ccec76dd50edb0507c40fcb614"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#ae95d98ccec76dd50edb0507c40fcb614">ParseBMSModbusReq</a> (<a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *PollInfo, unsigned char *Buffer, unsigned char ModbusType, unsigned char Media)</td></tr>
<tr class="memdesc:ae95d98ccec76dd50edb0507c40fcb614"><td class="mdescLeft">&#160;</td><td class="mdescRight">It parse request packet comes over the modbus from BMS. It request for data / status of particular BMS register address.  <a href="#ae95d98ccec76dd50edb0507c40fcb614">More...</a><br/></td></tr>
<tr class="separator:ae95d98ccec76dd50edb0507c40fcb614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd612a32122302dab28ae53ce5d4e580"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#abd612a32122302dab28ae53ce5d4e580">FillMBRTUReq</a> (unsigned char Media, <a class="el" href="struct_p_o_l_l_i_n_g___i_n_f_o.html">POLLING_INFO</a> *DeviceRef)</td></tr>
<tr class="memdesc:abd612a32122302dab28ae53ce5d4e580"><td class="mdescLeft">&#160;</td><td class="mdescRight">API to fill request packet that would be send over modbus tcp or modbus serial based on the media type.  <a href="#abd612a32122302dab28ae53ce5d4e580">More...</a><br/></td></tr>
<tr class="separator:abd612a32122302dab28ae53ce5d4e580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ae2ea8c9d24a48aa23fdbaadcea346"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#ab0ae2ea8c9d24a48aa23fdbaadcea346">FillModbusReq</a> (<a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *DeviceInfo, unsigned char *Buffer, unsigned char Media)</td></tr>
<tr class="memdesc:ab0ae2ea8c9d24a48aa23fdbaadcea346"><td class="mdescLeft">&#160;</td><td class="mdescRight">API to fill request packet that would be send over modbus tcp or modbus serial.  <a href="#ab0ae2ea8c9d24a48aa23fdbaadcea346">More...</a><br/></td></tr>
<tr class="separator:ab0ae2ea8c9d24a48aa23fdbaadcea346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f0f2e50d352037e7462766ce1fd21b"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="modbus_8h.html#a36f0f2e50d352037e7462766ce1fd21b">ParseMBRTUResp</a> (<a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *ModbusInfo, unsigned char *Buffer, unsigned char Media, unsigned long ReqCommAddr, unsigned short TransactionId)</td></tr>
<tr class="memdesc:a36f0f2e50d352037e7462766ce1fd21b"><td class="mdescLeft">&#160;</td><td class="mdescRight">It parse response packet comes over the modbus.Parsing response packet received from modbus tcp or modbus serial.  <a href="#a36f0f2e50d352037e7462766ce1fd21b">More...</a><br/></td></tr>
<tr class="separator:a36f0f2e50d352037e7462766ce1fd21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file contains structures which is used for communicating with Modbus slave devices. DCU support Modbus RTU and ASCII over TCP and serial. </p>

<p>Definition in file <a class="el" href="modbus_8h_source.html">modbus.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a05e33edad4a05b648013f88967138dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEN_OF_MB_PKT_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Length of buffer to store data of callback event. </p>

<p>Definition at line <a class="el" href="modbus_8h_source.html#l00011">11</a> of file <a class="el" href="modbus_8h_source.html">modbus.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="modbus_8h.html#ac018c0dd9d67383f495d4ca3505d1eb4">MB_POINT_TYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Types of register for Modbus. e.g holding register, input register etc. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4a93cb4a482f504fc91047a4aec00fe5c4"></a>MB_POINT_TYPE_COIL_STATUS</em>&#160;</td><td class="fielddoc">
<p>Modbus register type coil status can be used for reading and writing. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4ad28ad56cd11d1d3928f84754f1998b65"></a>MB_POINT_TYPE_INPUT_STATUS</em>&#160;</td><td class="fielddoc">
<p>Modbus register type input status which can be used only for reading. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4a1df1e49dcfe4c9360351bcc6d7b55ab7"></a>MB_POINT_TYPE_HOLDING_REG</em>&#160;</td><td class="fielddoc">
<p>Modbus register type holding. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4a32890793513068dea08c5342e750137a"></a>MB_POINT_TYPE_INPUT_REG</em>&#160;</td><td class="fielddoc">
<p>Modbus register type input. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4a7399e50461c2e8cf0091b1761d35ab8c"></a>MB_POINT_TYPE_WRITE_COIL</em>&#160;</td><td class="fielddoc">
<p>Modbus register type to write coil. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ac018c0dd9d67383f495d4ca3505d1eb4a83f8810b88c0b48819102e17362b75bc"></a>MB_POINT_TYPE_WRITE_MULTIPLE_COIL</em>&#160;</td><td class="fielddoc">
<p>Modbus register type to write multiple coil. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="modbus_8h_source.html#l00014">14</a> of file <a class="el" href="modbus_8h_source.html">modbus.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afb91953291005356320a0d0bc9ca8747"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char FillBMSModbusResp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *&#160;</td>
          <td class="paramname"><em>ModbusInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>ModbusType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>InterfaceIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>API to fill response packet to send over modbus tcp or modbus serial to the BMS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ModbusInfo</td><td>is the structure win which the data is filled which is needed to be copied in the buffer. </td></tr>
    <tr><td class="paramname">Buffer</td><td>Specifies packet to be filled for response to BMS request. </td></tr>
    <tr><td class="paramname">ModbusType</td><td>Specifies it can be modbus ASCII or RTU. </td></tr>
    <tr><td class="paramname">InterfaceIdx</td><td>Specifies interface index of the media to identify whether we got request over TCP or serial. In case of Modbus TCP header contains extra parameters compare TCP Modbus serial.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Offet Specifies number of bytes filled in response packet. </dd></dl>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00746">746</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
<a class="anchor" id="a96e86c4f8a8ac2e359b11519271924d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FillErrorCode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *&#160;</td>
          <td class="paramname"><em>ModbusInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>ModbusType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>InterfaceIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ErrorCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill error code in response packet to BMS as we got invalid request packet from BMS. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ModbusInfo</td><td>is the reference to the structure in which the requested data is stored. </td></tr>
    <tr><td class="paramname">Buffer</td><td>is used to contain the data that need to be send to device to inform the error. </td></tr>
    <tr><td class="paramname">ModbusType</td><td>Specifies it can be modbus ASCII or RTU. </td></tr>
    <tr><td class="paramname">InterfaceIdx</td><td>Specifies interface index of the media to identify whether we got request over TCP or serial. In case of Modbus TCP header contains extra parameters compare TCP Modbus serial. </td></tr>
    <tr><td class="paramname">ErrorCode</td><td>It informs modbus master invalid parameters that we got in BMS request packet.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Offet Number of bytes filled in packet. </dd></dl>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00866">866</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
<a class="anchor" id="abd612a32122302dab28ae53ce5d4e580"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FillMBRTUReq </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>Media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_p_o_l_l_i_n_g___i_n_f_o.html">POLLING_INFO</a> *&#160;</td>
          <td class="paramname"><em>PollingRef</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>API to fill request packet that would be send over modbus tcp or modbus serial based on the media type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Media</td><td>specifies devices connected over which interface. E.g Modbus TCP or Modbus Serial e.e RS485. </td></tr>
    <tr><td class="paramname">PollingRef</td><td>It contains reference of the device which contains information required for request over modbus tcp/modbus serial. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 as now no use. </dd></dl>
<p>&lt; Polling information that need to be filled during command modbus packet.</p>
<p>&lt; Local buffer to send the data request.</p>
<p>&lt; Length of the data that has to be send over modbus TCP </p>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00223">223</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab0ae2ea8c9d24a48aa23fdbaadcea346"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char FillModbusReq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *&#160;</td>
          <td class="paramname"><em>ModbusReqInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>Media</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>API to fill request packet that would be send over modbus tcp or modbus serial. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ModbusReqInfo</td><td>Specifies information required for request over modbus tcp/modbus serial. </td></tr>
    <tr><td class="paramname">Buffer</td><td>Specifies packet to be filled for request. </td></tr>
    <tr><td class="paramname">Media</td><td>Specifies devices connected over which interface. E.g Modbus TCP or Modbus Serial e.e RS485.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Offet Number of bytes filled in packet. </dd></dl>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00308">308</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae95d98ccec76dd50edb0507c40fcb614"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ParseBMSModbusReq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *&#160;</td>
          <td class="paramname"><em>ModbusInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>ModbusType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>InterfaceIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It parse request packet comes over the modbus from BMS. It request for data / status of particular BMS register address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ModbusInfo</td><td>It is a out parameter which will have the details of packets. </td></tr>
    <tr><td class="paramname">Buffer</td><td>Specifies actual bytes that we get as request packet over Modbus. </td></tr>
    <tr><td class="paramname">ModbusType</td><td>Specifies the type of Modbus protocol, modbus ASCII or RTU. </td></tr>
    <tr><td class="paramname">InterfaceIdx</td><td>Specifies the interface index of the communication media to identify whether we got request over TCP or serial. In case of Modbus TCP header contains extra parameters compare TCP Modbus serial. So read that extra bytes in that case.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns no of bytes read or ERROR VALUE if CRC of received packet is invalid in case of RS485. </dd></dl>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00653">653</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
<a class="anchor" id="a36f0f2e50d352037e7462766ce1fd21b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char ParseMBRTUResp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_o_d_b_u_s___r_e_q___i_n_f_o.html">MODBUS_REQ_INFO</a> *&#160;</td>
          <td class="paramname"><em>ModbusInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>Media</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>ReqCommAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>TransactionId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It parse response packet comes over the modbus.Parsing response packet received from modbus tcp or modbus serial. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ModbusInfo</td><td>Specifies Read received packet and fill it in poll info. </td></tr>
    <tr><td class="paramname">Buffer</td><td>Specifies actual bytes that we get as response over modbus. </td></tr>
    <tr><td class="paramname">Media</td><td>Specifies devices connected over which interface. E.g Modbus TCP or Modbus Serial e.e RS485. </td></tr>
    <tr><td class="paramname">ReqCommAddr</td><td>is the communication slave address for which we have sent the request. </td></tr>
    <tr><td class="paramname">TransactionId</td><td>is the unique for distinguishing the event.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns No of bytes read or ERROR VALUE if CRC of received packet is invalid. </dd></dl>

<p>Definition at line <a class="el" href="modbus_8c_source.html#l00140">140</a> of file <a class="el" href="modbus_8c_source.html">modbus.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bfccd401955b95cf8c75461437045ac0.html">inc</a></li><li class="navelem"><a class="el" href="modbus_8h.html">modbus.h</a></li>
    <li class="footer">Generated on Thu Jun 12 2014 20:35:59 for SiteSync Stage-1 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
